(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[557],{116:function(e,t,n){Promise.resolve().then(n.bind(n,840))},840:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Q}});var l=n(7437),a=n(2265),s=n(6681),i=e=>{var t;let{session:n}=e,[s,i]=(0,a.useState)({});return(0,a.useEffect)(()=>{(async()=>{try{let e=await n.executeSQL("SELECT\n'index hit rate' AS name,\n(sum(idx_blks_hit)) / nullif(sum(idx_blks_hit + idx_blks_read),0) AS ratio\nFROM pg_statio_user_indexes\nUNION ALL\nSELECT\n'table hit rate' AS name,\nsum(heap_blks_hit) / nullif(sum(heap_blks_hit) + sum(heap_blks_read),0) AS ratio\nFROM pg_statio_user_tables;");i(e)}catch(e){console.error(e)}})()},[]),(0,l.jsxs)(l.Fragment,{children:[(null==s?void 0:s.status)&&(null==s?void 0:s.status)!=="SUCCESS"&&(0,l.jsx)("h1",{className:"text -sm p-4 text-red-500 ",children:"Ahh! Error fetching info!"}),(null==s?void 0:s.status)==="SUCCESS"&&(null==s?void 0:null===(t=s.rows)||void 0===t?void 0:t.map(e=>{let{name:t,ratio:n}=e;return(0,l.jsxs)("div",{className:"py-4",children:[(0,l.jsx)("h1",{className:"text-xl px-2 font-thin",children:t&&t.charAt(0).toUpperCase()+t.slice(1)}),(0,l.jsx)("h1",{className:"text-5xl px-2 font-light truncate",children:n})]},t)}))]})},r=e=>{let{list:t=[,,,,,].fill({field:"Test",value:1})}=e;return(0,l.jsxs)("ul",{className:"py-2 text-sm overflow-auto",style:{height:"10rem"},children:[t.map(e=>{let{field:t,value:n}=e;return(0,l.jsxs)("li",{className:"flex w-full text-sm leading-normal hover:bg-gray-600 rounded hover:shadow-lg hover:drop-shadow hover:text-gray-100 px-1",children:[(0,l.jsx)("span",{className:"flex-1 truncate",children:t}),(0,l.jsx)("span",{className:"text-green-50",children:n})]},t)}),(null==t?void 0:t.length)===0&&(0,l.jsx)("li",{className:"flex w-full text-sm leading-normal",children:(0,l.jsx)("span",{className:"flex-1 truncate",children:"Insufficient Data"})})]})},o=e=>{let{session:t}=e,[n,s]=(0,a.useState)({});return(0,a.useEffect)(()=>{(async()=>{try{var e,n;let l=await t.executeSQL("SELECT relname AS name,\nseq_scan as count\nFROM\npg_stat_user_tables\nORDER BY seq_scan DESC;"),a=null!==(n=null==l?void 0:null===(e=l.rows)||void 0===e?void 0:e.map(e=>({field:e.name,value:e.count})))&&void 0!==n?n:[];s({status:l.status,rows:a})}catch(e){console.error(e)}})()},[]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{className:"text-xl py-4 font-thin",children:"Top Seq Scans"}),(null==n?void 0:n.status)&&(null==n?void 0:n.status)!=="SUCCESS"&&(0,l.jsx)("h1",{className:"text -sm p-4 text-red-500 ",children:"Ahh! Error fetching info!"}),(null==n?void 0:n.status)==="SUCCESS"&&(0,l.jsx)(r,{list:null==n?void 0:n.rows})]})},c=e=>{let{session:t}=e,[n,s]=(0,a.useState)({});return(0,a.useEffect)(()=>{(async()=>{try{var e,n;let l=await t.executeSQL("SELECT\npid,\nnow() - pg_stat_activity.query_start AS duration,\nquery AS query\nFROM\npg_stat_activity\nWHERE\npg_stat_activity.query <> ''::text\nAND state <> 'idle'\nAND now() - pg_stat_activity.query_start > interval '5 minutes'\nORDER BY\nnow() - pg_stat_activity.query_start DESC;");console.error(l);let a=null!==(n=null==l?void 0:null===(e=l.rows)||void 0===e?void 0:e.map(e=>({field:e.query,value:e.duration})))&&void 0!==n?n:[];s({status:l.status,rows:a})}catch(e){console.error(e)}})()},[]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{className:"text-xl py-4 font-thin",children:"Long Running Queries"}),(null==n?void 0:n.status)&&(null==n?void 0:n.status)!=="SUCCESS"&&(0,l.jsx)("h1",{className:"text -sm p-4 text-red-500 ",children:"Ahh! Error fetching info!"}),(null==n?void 0:n.status)==="SUCCESS"&&(0,l.jsx)(r,{list:null==n?void 0:n.rows})]})},d=e=>{var t;let{session:n}=e,[s,i]=(0,a.useState)({});return(0,a.useEffect)(()=>{(async()=>{try{var e,t;let l=await n.executeSQL("SELECT\nrelname AS name,\nn_live_tup AS estimated_count\nFROM\npg_stat_user_tables\nORDER BY\nn_live_tup DESC;"),a=null!==(t=null==l?void 0:null===(e=l.rows)||void 0===e?void 0:e.map(e=>({field:e.name,value:e.estimated_count})))&&void 0!==t?t:[];i({status:null==l?void 0:l.status,rows:a})}catch(e){console.error(e)}})()},[]),(0,l.jsxs)("div",{className:"flex-1 rounded-xl bg-gray-800 overflow-auto p-2 m-2 shadow-lg",children:[(0,l.jsx)("h1",{className:"text-xl",children:"Record Ranks"}),(0,l.jsx)(r,{list:null!==(t=null==s?void 0:s.rows)&&void 0!==t?t:[]})]})},u=e=>{var t;let{session:n}=e,[s,i]=(0,a.useState)({});return(0,a.useEffect)(()=>{(async()=>{try{var e,t;let l=await n.executeSQL("SELECT relname,\nCASE idx_scan\n  WHEN 0 THEN 'Insufficient data'\n  ELSE (100 * idx_scan / (seq_scan + idx_scan))::text\nEND percent_of_times_index_used,\nn_live_tup rows_in_table\nFROM\npg_stat_user_tables\nORDER BY\nn_live_tup DESC;"),a=null!==(t=null==l?void 0:null===(e=l.rows)||void 0===e?void 0:e.map(e=>({field:e.relname,value:"Insufficient data"!==e.percent_of_times_index_used?"".concat(e.percent_of_times_index_used,"%"):e.percent_of_times_index_used})))&&void 0!==t?t:[];i({status:null==l?void 0:l.status,rows:a})}catch(e){console.error(e)}})()},[]),(0,l.jsxs)("div",{className:"flex-1 rounded-xl bg-gray-800 overflow-auto p-2 m-2 shadow-lg",children:[(0,l.jsx)("h1",{className:"text-xl",children:"Index Usage"}),(0,l.jsx)(r,{list:null!==(t=null==s?void 0:s.rows)&&void 0!==t?t:[]})]})},h=e=>{var t;let{session:n}=e,[s,i]=(0,a.useState)({});return(0,a.useEffect)(()=>{(async()=>{try{var e,t;let l=await n.executeSQL("SELECT\nschemaname || '.' || relname AS table,\nindexrelname AS index,\npg_size_pretty(pg_relation_size(i.indexrelid)) AS index_size,\nidx_scan as index_scans\nFROM pg_stat_user_indexes ui\nJOIN pg_index i ON ui.indexrelid = i.indexrelid\nWHERE NOT indisunique AND idx_scan < 50 AND pg_relation_size(relid) > 5 * 8192\nORDER BY pg_relation_size(i.indexrelid) / nullif(idx_scan, 0) DESC NULLS FIRST,\npg_relation_size(i.indexrelid) DESC;"),a=null!==(t=null==l?void 0:null===(e=l.rows)||void 0===e?void 0:e.map(e=>({field:e.index,value:e.index_scans?"(".concat(e.index_size,") ").concat(e.index_scans,"%"):"Insufficient Data"})))&&void 0!==t?t:[];i({status:null==l?void 0:l.status,rows:a})}catch(e){console.error(e)}})()},[]),(0,l.jsxs)("div",{className:"flex-1 rounded-xl bg-gray-800 overflow-auto p-2 m-2 shadow-lg",children:[(0,l.jsx)("h1",{className:"text-xl",children:"Unused Index"}),(0,l.jsx)(r,{list:null!==(t=null==s?void 0:s.rows)&&void 0!==t?t:[]})]})},m=n(7114),x=e=>{var t,n,a,s;let{data:i,chartType:o,setChartType:c}=e,d=null!==(a=null==i?void 0:null===(t=i.rows)||void 0===t?void 0:t.reduce((e,t)=>e+Number.parseInt(t.size,10),0))&&void 0!==a?a:0,u=null!==(s=null==i?void 0:null===(n=i.rows)||void 0===n?void 0:n.map(e=>{let{name:t,size:n}=e;return{field:t,value:n}}))&&void 0!==s?s:[];return(0,l.jsxs)("div",{className:"flex-1 rounded-xl bg-gray-800 overflow-auto p-2 m-2 ",onMouseEnter:()=>"TABLE"!==o&&c("TABLE"),children:[(0,l.jsx)("h1",{className:"text-md font-thin",children:"Total Table Size"}),(0,l.jsx)("h2",{className:"text-5xl py-2",children:(0,m.a)(1024*d)}),(0,l.jsx)(r,{list:u})]})},v=e=>{var t,n,a,s;let{percentage:i,data:o,chartType:c,setChartType:d}=e,u=null!==(a=null==o?void 0:null===(t=o.rows)||void 0===t?void 0:t.reduce((e,t)=>e+Number.parseInt(t.size,10),0))&&void 0!==a?a:0,h=null!==(s=null==o?void 0:null===(n=o.rows)||void 0===n?void 0:n.map(e=>{let{name:t,size:n}=e;return{field:t,value:n}}))&&void 0!==s?s:[];return(0,l.jsxs)("div",{className:"flex-1 rounded-xl bg-gray-800 overflow-auto p-2 m-2 ",onMouseEnter:()=>"TABLE"!==c&&d("TABLE"),children:[(0,l.jsxs)("h1",{className:"text-md font-thin",children:["Table Size ",void 0!==i&&" (".concat(i,"%)")]}),(0,l.jsx)("h2",{className:"text-5xl py-2",children:(0,m.a)(1024*u)}),(0,l.jsx)(r,{list:h})]})},_=e=>{var t,n,a,s;let{percentage:i,data:o,chartType:c,setChartType:d}=e,u=null!==(a=null==o?void 0:null===(t=o.rows)||void 0===t?void 0:t.reduce((e,t)=>e+Number.parseInt(t.size,10),0))&&void 0!==a?a:0,h=null!==(s=null==o?void 0:null===(n=o.rows)||void 0===n?void 0:n.map(e=>{let{name:t,size:n}=e;return{field:t,value:n}}))&&void 0!==s?s:[];return(0,l.jsxs)("div",{className:"flex-1 rounded-xl bg-gray-800 overflow-auto p-2 m-2 ",onMouseEnter:()=>"INDEX"!==c&&d("INDEX"),children:[(0,l.jsxs)("h1",{className:"text-md font-thin",children:["Total Index Size",void 0!==i&&" (".concat(i,"%)")]}),(0,l.jsx)("h2",{className:"text-5xl py-2",children:(0,m.a)(1024*u)}),(0,l.jsx)(r,{list:h})]})},p=n(5231),g=n(3909),f=n(5369),E=n(8295),S=n(5475);let N=Math.PI/180,j=e=>{let{cx:t,cy:n,midAngle:a,innerRadius:s,outerRadius:i,percent:r,index:o}=e,c=s+(i-s)*.5,d=t+2.2*c*Math.cos(-a*N);return(0,l.jsx)("text",{x:d,y:n+2.2*c*Math.sin(-a*N),fill:"white",textAnchor:d>t?"start":"end",dominantBaseline:"central",className:"text-xs",children:"".concat((100*r).toFixed(0),"%")})},y=e=>{let{active:t,payload:n}=e;if(t&&n&&n.length){var a,s;return(0,l.jsx)("div",{className:"custom-tooltip bg-gray-800 border border-gray-400 p-2",children:(0,l.jsx)("p",{className:"label",children:"".concat(null==n?void 0:null===(a=n[0])||void 0===a?void 0:a.name," : ").concat(null==n?void 0:null===(s=n[0])||void 0===s?void 0:s.value," kB")})})}return null},w=["#0088FE","#00C49F","#FFBB28","#FF8042"];var b=e=>{let{pieData:t=[]}=e;return(0,l.jsx)(p.h,{width:"100%",height:"100%",children:(0,l.jsxs)(g.u,{width:400,height:400,children:[(0,l.jsx)(f.b,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:j,outerRadius:80,fill:"#8884d8",dataKey:"value",children:t.map((e,t)=>(0,l.jsx)(E.b,{fill:w[t%w.length]},"cell-".concat(t)))}),(0,l.jsx)(S.u,{content:(0,l.jsx)(y,{})})]})})},O=n(7265),T=n(2842),A=n(153),R=n(5745);let D=e=>{let{active:t,payload:n}=e;if(t&&n&&n.length){var a;return(0,l.jsx)("div",{className:"custom-tooltip bg-gray-900 border border-gray-400 p-2",children:(0,l.jsx)("pre",{className:"label",children:JSON.stringify(null==n?void 0:null===(a=n[0])||void 0===a?void 0:a.payload,null,2)})})}return null},C=["#0088FE","#00C49F"];var L=e=>{let{barchartData:t=[],keys:n=["totalTableSize","tableSize"]}=e;return(0,l.jsx)("div",{className:"w-full",style:{height:"33vh"},children:(0,l.jsx)(p.h,{width:"100%",height:"100%",children:(0,l.jsxs)(O.v,{width:500,height:300,data:t,margin:{top:5,right:30,left:20,bottom:5},children:[(0,l.jsx)(T.K,{dataKey:"name"}),(0,l.jsx)(S.u,{content:(0,l.jsx)(D,{})}),(0,l.jsx)(A.D,{}),n.map((e,t)=>(0,l.jsx)(R.$,{dataKey:e,fill:C[t%2]},e))]})})})};let I=e=>{var t,n,l,a;let s={};null==e||null===(n=e.tableData)||void 0===n||null===(t=n.rows)||void 0===t||t.forEach(e=>{let{name:t,size:n}=e;s[t]={tableSize:Number.parseInt(n,10)}}),null==e||null===(a=e.totalTableData)||void 0===a||null===(l=a.rows)||void 0===l||l.forEach(e=>{let{name:t,size:n}=e;s[t]={...s[t]&&s[t],totalTableSize:Number.parseInt(n,10)}});let i=Object.entries(s).map(e=>{let[t,n]=e;return{name:t,...n}});return null!=i?i:[]},F=()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"lg:h-48 bg-gray-400 md:h-36 w-full object-cover object-center"}),(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsx)("p",{className:"leading-relaxed mb-3 w-full h-3 animate-pulse bg-gray-400"}),(0,l.jsx)("p",{className:"leading-relaxed mb-3 w-2/3 h-3 animate-pulse bg-gray-400"}),(0,l.jsx)("p",{className:"leading-relaxed mb-3 w-1/2 h-3 animate-pulse bg-gray-400"})]})]}),M=(e,t)=>{var n,l,a,s,i,r,o;return((null!==(i=null==e?void 0:null===(l=e[t])||void 0===l?void 0:null===(n=l.rows)||void 0===n?void 0:n.reduce((e,t)=>e+Number.parseInt(t.size,10),0))&&void 0!==i?i:0)/(null!==(r=null==e?void 0:null===(s=e.totalTableData)||void 0===s?void 0:null===(a=s.rows)||void 0===a?void 0:a.reduce((e,t)=>e+Number.parseInt(t.size,10),0))&&void 0!==r?r:0)*100).toFixed(2)};var z=e=>{var t,n,s;let{session:i}=e,[r,o]=(0,a.useState)({}),[c,d]=(0,a.useState)("INDEX");(0,a.useEffect)(()=>{(async()=>{try{o({loading:!0});let e=await i.executeSQL("SELECT c.relname AS name,\npg_size_pretty(pg_total_relation_size(c.oid)) AS size\nFROM pg_class c\nLEFT JOIN pg_namespace n ON (n.oid = c.relnamespace)\nWHERE n.nspname NOT IN ('pg_catalog', 'information_schema')\nAND n.nspname !~ '^pg_toast'\nAND c.relkind='r'\nORDER BY pg_total_relation_size(c.oid) DESC;"),t=await i.executeSQL("SELECT c.relname AS name,\npg_size_pretty(pg_table_size(c.oid)) AS size\nFROM pg_class c\nLEFT JOIN pg_namespace n ON (n.oid = c.relnamespace)\nWHERE n.nspname NOT IN ('pg_catalog', 'information_schema')\nAND n.nspname !~ '^pg_toast'\nAND c.relkind='r'\nORDER BY pg_table_size(c.oid) DESC;"),n=await i.executeSQL("\nSELECT c.relname AS name,\n  pg_size_pretty(sum(c.relpages::bigint*8192)::bigint) AS size\nFROM pg_class c\nLEFT JOIN pg_namespace n ON (n.oid = c.relnamespace)\nWHERE n.nspname NOT IN ('pg_catalog', 'information_schema')\nAND n.nspname !~ '^pg_toast'\nAND c.relkind='i'\nGROUP BY c.relname\nORDER BY sum(c.relpages) DESC;\n  ");o({loading:!1,totalTableData:e,tableData:t,indexData:n})}catch(e){o({loading:!1,error:!0}),console.log(e)}})()},[]);let u=null!==(s=null==r?void 0:null===(n=r.indexData)||void 0===n?void 0:null===(t=n.rows)||void 0===t?void 0:t.map(e=>{let{name:t,size:n}=e;return{name:t,value:Number.parseInt(n,10)}}))&&void 0!==s?s:[],h=I(r);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{className:"text-2xl p-4",children:"Disk Usage"}),(0,l.jsxs)("div",{className:"w-full rounded-xl bg-gray-800",children:[(null==r?void 0:r.loading)===!0&&(0,l.jsx)(F,{}),(null==r?void 0:r.loading)===!1&&!(null==r?void 0:r.error)&&(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,l.jsx)("div",{className:"col-span-2",children:(0,l.jsx)(L,{barchartData:h})}),(0,l.jsx)("div",{className:"col",children:(0,l.jsx)(b,{pieData:u})})]}),(0,l.jsxs)("div",{className:"w-full flex",children:[(0,l.jsx)(x,{data:null==r?void 0:r.totalTableData,chartType:c,setChartType:d}),(0,l.jsx)(v,{percentage:M(r,"tableData"),data:null==r?void 0:r.tableData,chartType:c,setChartType:d}),(0,l.jsx)(_,{percentage:M(r,"indexData"),data:null==r?void 0:r.indexData,chartType:c,setChartType:d})]})]})]})]})},B=e=>{var t;let{session:n}=e,[s,i]=(0,a.useState)({});return(0,a.useEffect)(()=>{(async()=>{try{var e,t;let l=await n.executeSQL("SELECT * FROM pg_available_extensions WHERE name IN (SELECT unnest(string_to_array(current_setting('extwlist.extensions'), ',')))");console.log(l);let a=null!==(t=null==l?void 0:null===(e=l.rows)||void 0===e?void 0:e.map(e=>{var t;return{field:"".concat(e.name," : ").concat(e.comment),value:"".concat(null!==(t=e.installed_version)&&void 0!==t?t:"not installed"," / ").concat(e.default_version)}}))&&void 0!==t?t:[];i({status:null==l?void 0:l.status,rows:a})}catch(e){console.error(e)}})()},[]),(0,l.jsxs)("div",{className:"flex-1 rounded-xl bg-gray-800 overflow-auto p-2 m-2 shadow-lg font-semibold",children:[(0,l.jsxs)("span",{className:"flex justify-between w-full",children:[(0,l.jsx)("h1",{className:"text-xl",children:"Extensions"}),(0,l.jsx)("h1",{className:"font-thin",children:"installed / available"})]}),(0,l.jsx)(r,{list:null!==(t=null==s?void 0:s.rows)&&void 0!==t?t:[]})]})},k=n(9361),H=()=>{let e=new k.Z("PG");return(0,l.jsxs)("div",{className:"flex w-full h-full text-gray-200 bg-gray-900 font-normal font-sans",style:{height:"calc(100vh - 25px)",maxHeight:"calc(100vh - 25px)"},children:[(0,l.jsxs)("div",{className:"h-full flex-auto p-2 overflow-auto",children:[(0,l.jsx)(z,{session:e}),(0,l.jsx)("h1",{className:"text-2xl p-4",children:"Records & Indexing"}),(0,l.jsxs)("div",{className:"w-full flex",children:[(0,l.jsx)(d,{session:e}),(0,l.jsx)(u,{session:e}),(0,l.jsx)(h,{session:e})]}),(0,l.jsx)(B,{session:e})]}),(0,l.jsx)("div",{className:"h-full flex-none p-4",style:{width:"25vw"},children:(0,l.jsxs)("div",{className:"h-full rounded-xl bg-gray-800 overflow-auto p-4 shadow-lg",children:[(0,l.jsx)(i,{session:e}),(0,l.jsx)(o,{session:e}),(0,l.jsx)(c,{session:e})]})})]})};function Q(){return(0,a.useEffect)(()=>{},[]),(0,l.jsx)("main",{className:"flex flex-col p-4 h-screen w-full bg-gray-800",children:(0,l.jsx)(s.wI,{children:(0,l.jsx)(H,{})})})}},9361:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let l=async(e,t)=>{let n=await fetch("http://localhost:3253/api/execute_pg",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({queries:e})});if(!n.ok)throw Error("Failed to execute query");return await n.json()};class a{constructor(e){this.executeSQL=e=>new Promise((t,n)=>{l([e],this.id).then(e=>{var l,a;(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l[0])?t(null==e?void 0:null===(a=e.data)||void 0===a?void 0:a[0]):n(Error("Failed to execute query"))}).catch(n)}),this.getDBSchemas=()=>new Promise((e,t)=>{this.executeSQL("SELECT schema_name\n      FROM information_schema.schemata\n      WHERE \"schema_name\" NOT LIKE 'pg_%' AND schema_name <> 'information_schema';").then(n=>(null==n?void 0:n.rows)&&Array.isArray(null==n?void 0:n.rows)?e(null==n?void 0:n.rows.filter(e=>!!(null==e?void 0:e.schema_name)).map(e=>e.schema_name)):t(Error("Failed to parse the schemas"))).catch(t)}),this.getErdData=()=>new Promise((e,t)=>{this.executeSQL("SELECT\n      tc.table_schema,\n      tc.constraint_name,\n      tc.table_name,\n      kcu.column_name,\n      ccu.table_schema AS foreign_table_schema,\n      ccu.table_name AS foreign_table_name,\n      ccu.column_name AS foreign_column_name\n  FROM\n      information_schema.table_constraints AS tc\n      JOIN information_schema.key_column_usage AS kcu\n        ON tc.constraint_name = kcu.constraint_name\n        AND tc.table_schema = kcu.table_schema\n      JOIN information_schema.constraint_column_usage AS ccu\n        ON ccu.constraint_name = tc.constraint_name\n        AND ccu.table_schema = tc.table_schema;\n  ").then(t=>(console.log(t),e(t))).catch(t)}),this.getAllTables=e=>new Promise((t,n)=>{this.executeSQL("SELECT * FROM information_schema.tables\n      WHERE table_schema = '".concat(e,"'")).then(e=>(null==e?void 0:e.rows)&&Array.isArray(null==e?void 0:e.rows)?t(null==e?void 0:e.rows.filter(e=>!!(null==e?void 0:e.table_name))):n(Error("Failed to parse the schemas"))).catch(n)}),this.getTableData=e=>{let{schema:t,table:n,pagenumber:l=1,size:a=50,sortedColumns:s}=e;return new Promise((e,i)=>{let r='SELECT * FROM "'.concat(t,'"."').concat(n,'" ');s&&(r+=" ORDER BY "+Object.entries(s).map(e=>{let[t,n]=e;return"".concat(t," ").concat(n)}).join(",")),r+=" LIMIT ".concat(a," OFFSET ").concat((l-1)*a,";"),this.executeSQL(r).then(t=>e(t)).catch(i)})},this.getColumnNames=e=>{let{schema:t,table:n}=e;return new Promise((e,l)=>{let a="SELECT\n      column_name,\n      data_type\n    FROM\n      INFORMATION_SCHEMA.COLUMNS\n    WHERE\n      TABLE_NAME = '".concat(n,"'\n      AND table_schema = '").concat(t,"';");this.executeSQL(a).then(t=>e(t)).catch(l)})},this.id=e}}var s=a},6681:function(e,t,n){"use strict";n.d(t,{wI:function(){return c},mr:function(){return r}});var l=n(7437),a=n(2265);function s(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{history:[]},l=arguments.length>1?arguments[1]:void 0;switch(l.type){case"SET_SESSION":return{...n,session:l.payload};case"CLEAR_SESSION":return{...n,session:void 0};case"SET_HISTORY":return{...n,history:l.payload};case"ADD_HISTORY":{let t=null!==(e=n.history)&&void 0!==e?e:[],a=t.findIndex(e=>e.sql===l.payload.sql);if(-1===a)return{...n,history:[l.payload,...t]};{let e=t.map((e,t)=>t===a?{...e,time:new Date}:e);return{...n,history:e}}}case"REMOVE_HISTORY":let a=[...null!==(t=n.history)&&void 0!==t?t:[]];return null==a||a.splice(l.payload,1),{...n,history:a};case"CLEAR_HISTORY":return{...n,history:[]};default:return n}}let i=(0,a.createContext)({});function r(){return(0,a.useContext)(i)}let o=()=>{try{var e;return JSON.parse(null!==(e=localStorage.getItem("SQL_HISTORY"))&&void 0!==e?e:"[]")}catch(e){return[]}},c=e=>{let{children:t}=e,{Provider:n}=i,r=o();return(0,l.jsx)(n,{value:(0,a.useReducer)(s,{history:null!=r?r:[]}),children:t})}},7114:function(e,t,n){"use strict";n.d(t,{W:function(){return l},a:function(){return a}});let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=3735928559^t,l=1103547991^t;for(let t=0,a;t<e.length;t++)n=Math.imul(n^(a=e.charCodeAt(t)),2654435761),l=Math.imul(l^a,1597334677);return n=Math.imul(n^n>>>16,2246822507)^Math.imul(l^l>>>13,3266489909),4294967296*(2097151&(l=Math.imul(l^l>>>16,2246822507)^Math.imul(n^n>>>13,3266489909)))+(n>>>0)},a=e=>{let t=0,n=parseInt(e,10)||0;for(;n>=1024&&++t;)n/=1024;return"".concat(n.toFixed(n<10&&t>0?1:0)," ").concat(["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t])}}},function(e){e.O(0,[858,971,23,744],function(){return e(e.s=116)}),_N_E=e.O()}]);