(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{26984:function(e,t,n){Promise.resolve().then(n.bind(n,64781)),Promise.resolve().then(n.bind(n,19082)),Promise.resolve().then(n.t.bind(n,73247,23)),Promise.resolve().then(n.t.bind(n,58877,23))},64781:function(e,t,n){"use strict";var a=n(57437),o=n(2265),s=n(16463),c=n(29361),r=n(95576);let l=()=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-activity",style:{transform:"translate(5px, 5px)"},children:(0,a.jsx)("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),i=()=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-columns",style:{transform:"translate(5px, 5px)"},children:(0,a.jsx)("path",{d:"M12 3h7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-7m0-18H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7m0-18v18"})}),h=0;t.default=()=>{let e=(0,s.usePathname)(),t=(0,s.useRouter)();(0,o.useEffect)(()=>{1==++h&&new c.Z("PG").executeSQL("SELECT 1;").then(e=>{}).catch(e=>{alert("Looks like you are not connected to the database. Please connect to the database by executing  the following from terminal \nnpx dblens <postgres_connection_string>"),console.error(e)})},[]);let n="SQL";(null==e?void 0:e.includes("/sql"))?n="SQL":(null==e?void 0:e.includes("/overview"))?n="OVERVIEW":(null==e?void 0:e.includes("/overview"))?n="OVERVIEW":(null==e?void 0:e.includes("/explorer"))?n="EXPLORER":(null==e?void 0:e.includes("/erd"))&&(n="ERD");let u=e=>{t.push("/".concat(e.toLowerCase()))},m=async()=>{},d=e=>{let{text:t}=e;return(0,a.jsx)(r.Z,{id:"btn-".concat(t),type:"info",children:(0,a.jsx)("span",{children:t})})},b=e=>{let{tabName:t,children:o}=e;return(0,a.jsxs)("button",{type:"button",className:"text-xs h-20 pl-1 focus:ring-0 hover:bg-gray-600 ".concat(n===t&&"border-l-4 border-green-600 text-green-600 font-bold"),onClick:()=>u(t),"data-tip":!0,"data-for":"btn-".concat(t),children:[o,(0,a.jsx)(d,{text:t})]})};return(0,a.jsxs)("div",{className:"bg-gray-900 text-gray-100 w-12  flex flex-col border border-gray-700 text-xs",children:[(0,a.jsx)("button",{type:"button",className:"m-2 text-sm text-green-600 font-bold animate-ping",onClick:m,"data-tip":!0,"data-for":"btn-disconnect",children:(0,a.jsx)("span",{role:"img","aria-label":"app-icon",className:"p-2 font-mono",children:"●"})}),(0,a.jsx)("button",{type:"button",className:"mb-4 pt-4",children:(0,a.jsx)("span",{role:"img","aria-label":"app-icon",className:"p-2 font-mono text-2xl",children:"⚡️"})}),(0,a.jsx)(b,{tabName:"OVERVIEW",children:(0,a.jsx)(l,{})}),(0,a.jsx)(b,{tabName:"SQL",children:"SQL"}),(0,a.jsx)(b,{tabName:"EXPLORER",children:(0,a.jsx)(i,{})}),(0,a.jsx)(b,{tabName:"ERD",children:"ER"}),(0,a.jsx)("button",{type:"button",className:"text-xs h-20 focus:ring-0 hover:bg-gray-600 ".concat("SETTINGS"===n&&"border-l-4 border-green-600 text-green-600 font-bold"),onClick:()=>u(""),children:(0,a.jsx)("span",{role:"img","aria-label":"app-icon",className:"p-2 font-mono text-2xl",children:"⚙️"})})]})}},19082:function(e,t,n){"use strict";n.d(t,{CSPostHogProvider:function(){return c}});var a=n(57437);n(2265);var o=n(90082),s=n(53782);function c(e){let{children:t}=e;return(0,a.jsx)(s.zf,{client:o.ZP,children:t})}o.ZP.init("phc_w3BnJp2sDXvSpIsMkofnwDSObboBd6DXhNetfZuyWVO",{api_host:"https://us.i.posthog.com",persistence:"localStorage",loaded:e=>{console.log("PostHog loaded successfully")}})},29361:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let a=async(e,t)=>{let n=await fetch("http://localhost:3253/api/execute_pg",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({queries:e})});if(!n.ok)throw Error("Failed to execute query");return await n.json()};class o{constructor(e){this.executeSQL=e=>new Promise((t,n)=>{a([e],this.id).then(e=>{var a,o;(null==e?void 0:null===(a=e.data)||void 0===a?void 0:a[0])?t(null==e?void 0:null===(o=e.data)||void 0===o?void 0:o[0]):n(Error("Failed to execute query"))}).catch(n)}),this.getDBSchemas=()=>new Promise((e,t)=>{this.executeSQL("SELECT schema_name\n      FROM information_schema.schemata\n      WHERE \"schema_name\" NOT LIKE 'pg_%' AND schema_name <> 'information_schema';").then(n=>(null==n?void 0:n.rows)&&Array.isArray(null==n?void 0:n.rows)?e(null==n?void 0:n.rows.filter(e=>!!(null==e?void 0:e.schema_name)).map(e=>e.schema_name)):t(Error("Failed to parse the schemas"))).catch(t)}),this.getErdData=()=>new Promise((e,t)=>{this.executeSQL("SELECT\n      tc.table_schema,\n      tc.constraint_name,\n      tc.table_name,\n      kcu.column_name,\n      ccu.table_schema AS foreign_table_schema,\n      ccu.table_name AS foreign_table_name,\n      ccu.column_name AS foreign_column_name\n  FROM\n      information_schema.table_constraints AS tc\n      JOIN information_schema.key_column_usage AS kcu\n        ON tc.constraint_name = kcu.constraint_name\n        AND tc.table_schema = kcu.table_schema\n      JOIN information_schema.constraint_column_usage AS ccu\n        ON ccu.constraint_name = tc.constraint_name\n        AND ccu.table_schema = tc.table_schema;\n  ").then(t=>(console.log(t),e(t))).catch(t)}),this.getAllTables=e=>new Promise((t,n)=>{this.executeSQL("SELECT * FROM information_schema.tables\n      WHERE table_schema = '".concat(e,"'")).then(e=>(null==e?void 0:e.rows)&&Array.isArray(null==e?void 0:e.rows)?t(null==e?void 0:e.rows.filter(e=>!!(null==e?void 0:e.table_name))):n(Error("Failed to parse the schemas"))).catch(n)}),this.getTableData=e=>{let{schema:t,table:n,pagenumber:a=1,size:o=50,sortedColumns:s}=e;return new Promise((e,c)=>{let r='SELECT * FROM "'.concat(t,'"."').concat(n,'" ');s&&(r+=" ORDER BY "+Object.entries(s).map(e=>{let[t,n]=e;return"".concat(t," ").concat(n)}).join(",")),r+=" LIMIT ".concat(o," OFFSET ").concat((a-1)*o,";"),this.executeSQL(r).then(t=>e(t)).catch(c)})},this.getColumnNames=e=>{let{schema:t,table:n}=e;return new Promise((e,a)=>{let o="SELECT\n      column_name,\n      data_type\n    FROM\n      INFORMATION_SCHEMA.COLUMNS\n    WHERE\n      TABLE_NAME = '".concat(n,"'\n      AND table_schema = '").concat(t,"';");this.executeSQL(o).then(t=>e(t)).catch(a)})},this.id=e}}var s=o},58877:function(){}},function(e){e.O(0,[569,756,773,971,23,744],function(){return e(e.s=26984)}),_N_E=e.O()}]);