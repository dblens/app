(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{6984:function(e,t,n){Promise.resolve().then(n.bind(n,4781)),Promise.resolve().then(n.bind(n,9082)),Promise.resolve().then(n.t.bind(n,3247,23)),Promise.resolve().then(n.t.bind(n,6857,23))},4781:function(e,t,n){"use strict";var o=n(7437),a=n(2265),r=n(6463),s=n(9361);let c=()=>(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-activity",style:{transform:"translate(5px, 5px)"},children:(0,o.jsx)("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),l=()=>(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-columns",style:{transform:"translate(5px, 5px)"},children:(0,o.jsx)("path",{d:"M12 3h7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-7m0-18H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7m0-18v18"})}),i=0;t.default=()=>{let e=(0,r.usePathname)(),t=(0,r.useRouter)();(0,a.useEffect)(()=>{1==++i&&new s.Z("PG").executeSQL("SELECT 1;").then(e=>{}).catch(e=>{alert("Looks like you are not connected to the database. Please connect to the database by executing  the following from terminal \nnpx dblens <postgres_connection_string>"),console.error(e)})},[]);let n="SQL";(null==e?void 0:e.includes("/sql"))?n="SQL":(null==e?void 0:e.includes("/overview"))?n="OVERVIEW":(null==e?void 0:e.includes("/overview"))&&(n="OVERVIEW");let h=e=>{t.push("/".concat(e.toLowerCase()))},u=async()=>{};return(0,o.jsxs)("div",{className:"bg-gray-900 text-gray-100 w-12  flex flex-col border border-gray-700 text-xs",children:[(0,o.jsx)("button",{type:"button",className:"m-2 text-sm text-green-600 font-bold animate-ping",onClick:u,"data-tip":!0,"data-for":"btn-disconnect",children:(0,o.jsx)("span",{role:"img","aria-label":"app-icon",className:"p-2 font-mono",children:"●"})}),(0,o.jsx)("button",{type:"button",className:"mb-4 pt-4",children:(0,o.jsx)("span",{role:"img","aria-label":"app-icon",className:"p-2 font-mono text-2xl",children:"⚡️"})}),(0,o.jsx)("button",{type:"button",className:"text-xs h-20 pl-1 focus:ring-0 hover:bg-gray-600 ".concat("OVERVIEW"===n&&"border-l-4 border-green-600 text-green-600 font-bold"),onClick:()=>h("OVERVIEW"),children:(0,o.jsx)(c,{})}),(0,o.jsx)("button",{type:"button",className:"text-xs h-20 focus:ring-0 hover:bg-gray-600 ".concat("SQL"===n&&"border-l-4 border-green-600 text-green-600 font-bold"),onClick:()=>h("SQL"),children:"SQL"}),(0,o.jsx)("button",{type:"button",className:"text-xs h-20 focus:ring-0 pl-1 hover:bg-gray-600 ".concat("TABLE"===n&&"border-l-4 border-green-600 text-green-600 font-bold"),onClick:()=>h(""),children:(0,o.jsx)(l,{})}),(0,o.jsx)("button",{type:"button",className:"text-xs h-20 focus:ring-0 hover:bg-gray-600 ".concat("ERD"===n&&"border-l-4 border-green-600 text-green-600 font-bold"),onClick:()=>h(""),children:"ER"}),(0,o.jsx)("button",{type:"button",className:"text-xs h-20 focus:ring-0 hover:bg-gray-600 ".concat("SETTINGS"===n&&"border-l-4 border-green-600 text-green-600 font-bold"),onClick:()=>h(""),children:(0,o.jsx)("span",{role:"img","aria-label":"app-icon",className:"p-2 font-mono text-2xl",children:"⚙️"})})]})}},9082:function(e,t,n){"use strict";n.d(t,{CSPostHogProvider:function(){return s}});var o=n(7437);n(2265);var a=n(82),r=n(3782);function s(e){let{children:t}=e;return(0,o.jsx)(r.zf,{client:a.ZP,children:t})}a.ZP.init("phc_w3BnJp2sDXvSpIsMkofnwDSObboBd6DXhNetfZuyWVO",{api_host:"https://us.i.posthog.com",persistence:"localStorage",loaded:e=>{console.log("PostHog loaded successfully")}})},9361:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let o=async(e,t)=>{let n=await fetch("http://localhost:3253/api/execute_pg",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({queries:e})});if(!n.ok)throw Error("Failed to execute query");return await n.json()};class a{constructor(e){this.executeSQL=e=>new Promise((t,n)=>{o([e],this.id).then(e=>{var o,a;(null==e?void 0:null===(o=e.data)||void 0===o?void 0:o[0])?t(null==e?void 0:null===(a=e.data)||void 0===a?void 0:a[0]):n(Error("Failed to execute query"))}).catch(n)}),this.getDBSchemas=()=>new Promise((e,t)=>{this.executeSQL("SELECT schema_name\n      FROM information_schema.schemata\n      WHERE \"schema_name\" NOT LIKE 'pg_%' AND schema_name <> 'information_schema';").then(n=>(null==n?void 0:n.rows)&&Array.isArray(null==n?void 0:n.rows)?e(null==n?void 0:n.rows.filter(e=>!!(null==e?void 0:e.schema_name)).map(e=>e.schema_name)):t(Error("Failed to parse the schemas"))).catch(t)}),this.getErdData=()=>new Promise((e,t)=>{this.executeSQL("SELECT\n      tc.table_schema,\n      tc.constraint_name,\n      tc.table_name,\n      kcu.column_name,\n      ccu.table_schema AS foreign_table_schema,\n      ccu.table_name AS foreign_table_name,\n      ccu.column_name AS foreign_column_name\n  FROM\n      information_schema.table_constraints AS tc\n      JOIN information_schema.key_column_usage AS kcu\n        ON tc.constraint_name = kcu.constraint_name\n        AND tc.table_schema = kcu.table_schema\n      JOIN information_schema.constraint_column_usage AS ccu\n        ON ccu.constraint_name = tc.constraint_name\n        AND ccu.table_schema = tc.table_schema;\n  ").then(t=>(console.log(t),e(t))).catch(t)}),this.getAllTables=e=>new Promise((t,n)=>{this.executeSQL("SELECT * FROM information_schema.tables\n      WHERE table_schema = '".concat(e,"'")).then(e=>(null==e?void 0:e.rows)&&Array.isArray(null==e?void 0:e.rows)?t(null==e?void 0:e.rows.filter(e=>!!(null==e?void 0:e.table_name))):n(Error("Failed to parse the schemas"))).catch(n)}),this.getTableData=e=>{let{schema:t,table:n,pagenumber:o=1,size:a=50,sortedColumns:r}=e;return new Promise((e,s)=>{let c='SELECT * FROM "'.concat(t,'"."').concat(n,'" ');r&&(c+=" ORDER BY "+Object.entries(r).map(e=>{let[t,n]=e;return"".concat(t," ").concat(n)}).join(",")),c+=" LIMIT ".concat(a," OFFSET ").concat((o-1)*a,";"),this.executeSQL(c).then(t=>e(t)).catch(s)})},this.getColumnNames=e=>{let{schema:t,table:n}=e;return new Promise((e,o)=>{let a="SELECT\n      column_name,\n      data_type\n    FROM\n      INFORMATION_SCHEMA.COLUMNS\n    WHERE\n      TABLE_NAME = '".concat(n,"'\n      AND table_schema = '").concat(t,"';");this.executeSQL(a).then(t=>e(t)).catch(o)})},this.id=e}}var r=a},6857:function(){}},function(e){e.O(0,[569,212,971,23,744],function(){return e(e.s=6984)}),_N_E=e.O()}]);